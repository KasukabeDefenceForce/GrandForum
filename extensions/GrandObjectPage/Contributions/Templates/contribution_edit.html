<div class="small">
    For CASH and IN-KIND Contributions, DO NOT include:
    <ul>
        <li>grants from federal granting agencies, such as NSERC, CIHR, SSHRC, CFI or Genome Canada and its provincial centres (except Genome BC) for research, equipment, etc.;</li>
        <li>contributions from partners who are funded by federal granting agencies, such as NCE, NSERC, CIHR, SSHRC, CFI or Genome Canada.</li>
        <li>salaries of individuals who are eligible to receive funds directly from the granting agencies (e.g. faculty members of postsecondary institutions) and any associated administrative overhead costs.</li>
        <li>contributions or contracts outside of the scope of the networkâ€™s activities.</li>
        <li>time on committees and boards.</li>
    </ul>
</div>
<span class="label" style="display:inline-block;">Title:</span> <%= HTML.TextBox(this, 'name', {size: '50'}) %>
<% if(networkName != 'MtS'){ %>
    <h2>People</h2>
    <div id="contributionAuthors">
    </div>
<% } %>
<% if(networkName != 'MtS'){ %>
    <h2>Description</h2>
    <%= HTML.TextArea(this, 'description', {style: 'height:175px;width:650px;'}) %>
<% } %>
<table>
    <tr class="tooltip" title="The institution where the contribution was used">
        <td align="right"><b>PI Institution:</b></td>
        <td><%= HTML.TextBox(this, 'institution', {size: '40'}) %><br /></td>
    </tr>
    <tr class="tooltip" title="The province in which that institution is located">
        <td align="right"><b>Province:</b></td>
        <td><%= HTML.TextBox(this, 'province', {size: '40'}) %><br /></td>
    </tr>
    <tr>
        <td align="right"><b>Start Date:</b></td>
        <td><%= HTML.DatePicker(this, 'start', {format: 'yy-mm-dd', style: 'width:100px'}) %></td>
    </tr>
    <tr>
        <td align="right"><b>End Date:</b></td>
        <td><%= HTML.DatePicker(this, 'end', {format: 'yy-mm-dd', style: 'width:100px'}) %></td>
    </tr>
    <tr>
</table>
<table id="partners" width="100%">
    <tr>
        <td valign="top" width="50%">
            <h2>Contributing Partners</h2>
            <% _.each(partners, function(partner, i){ %>
                <div class="warning" style="display:none;" id="warning<%= i %>"></div>
                <table id="partner<%= i %>">
                    <tr>
                        <td align="right"><b>Partner:</b></td>
                        <td><%= HTML.TextBox(this, 'partners.' + i + '.name', {size: '50', class: 'partner_name'}) %></td>
                    </tr>
                    <tr style="<% if(networkName == 'MtS'){ %> display:none; <% } %>">
                        <td valign="top" style="padding-top:11px;width:100px;" align="right"><b>Contact:</b><br /><small style="line-height: 1em;">This information is for reporting purposes only. Partners will not be contacted.</small></td>
                        <td>
                            <table>
                                <tr>
                                    <td>Honorific:</td>
                                    <td><%= HTML.Select(this, 'partners.' + i + '.contact.honorific', {options: ['Mr.', 'Mrs.', 'Ms.', 'Dr.', 'Prof.', 'Mme', 'M.']}) %></td>
                                </tr>
                                <tr>
                                    <td>First Name:</td>
                                    <td><%= HTML.TextBox(this, 'partners.' + i + '.contact.first') %></td>
                                </tr>
                                <tr>
                                    <td>Last Name:</td>
                                    <td><%= HTML.TextBox(this, 'partners.' + i + '.contact.last') %></td>
                                </tr>
                                <tr>
                                    <td>Mailing Address:</td>
                                    <td><%= HTML.TextBox(this, 'partners.' + i + '.contact.address') %></td>
                                </tr>
                                <tr>
                                    <td>Phone Number:</td>
                                    <td><%= HTML.TextBox(this, 'partners.' + i + '.contact.phone') %></td>
                                </tr>
                                <tr>
                                    <td>Email Address:</td>
                                    <td><%= HTML.TextBox(this, 'partners.' + i + '.contact.email') %></td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td align="right" style="white-space:nowrap;"><b>Network Signatory:</b></td>
                        <td><%= HTML.Select(this, 'partners.' + i + '.signatory', {options: ['','Yes',
                                                                                                'No']}) %></td>
                    </tr>
                    <tr>
                        <td align="right"><b>Sector:</b></td>
                        <td><%= HTML.Select(this, 'partners.' + i + '.industry', {options: ['','University',
                                                                                               'Industry',
                                                                                               'Federal Departments and Agencies',
                                                                                               'Provincial Departments and Agencies',
                                                                                               'Hospitals and Care Centres',
                                                                                               'Community/Not for profit',
                                                                                               'Other']}) %></td>
                    </tr>
                    <tr>
                        <td align="right"><b>Country:</b></td>
                        <td><%= HTML.TextBox(this, 'partners.' + i + '.country') %></td>
                    </tr>
                    <tr>
                        <td align="right"><b>Province:</b></td>
                        <td><%= HTML.TextBox(this, 'partners.' + i + '.prov') %></td>
                    </tr>
                    <tr>
                        <td align="right"><b>City:</b></td>
                        <td><%= HTML.TextBox(this, 'partners.' + i + '.city') %></td>
                    </tr>
                    <tr>
                        <td align="right"><b>Level:</b></td>
                        <td><%= HTML.Select(this, 'partners.' + i + '.level', {options: ['','Provincial','Federal']}) %></td>
                    </tr>
                    <tr>
                        <td align="right"><b>Type:</b></td>
                        <td><%= HTML.Select(this, 'partners.' + i + '.type', {options: [{value: '', option: '[Select Contribution Type]'},
                                                                                        'Cash',
                                                                                        'Cash and In-Kind',
                                                                                        'In-Kind',
                                                                                        'Grant',
                                                                                        'Research Chair',
                                                                                        'Scholarship',
                                                                                        'Fellowship',
                                                                                        'Contract'],
                                                                              class: 'partner_type'}) %></td>
                    </tr>
                    <tr id="amount">
                        <td class="label" align="right"><b>Amount:</b></td>
                        <td>
                            <%= HTML.TextBox(this, 'partners.' + i + '.amounts.none', {style: 'width: 75px', class: 'amount'}) %>
                        </td>
                    </tr>
                    <tr id="cash">
                        <td class="label" align="right"><b>Cash Amounts:</b></td>
                        <td>
                            <% _.each(cashMap, function(subType, subId){ %>
                                <%= HTML.TextBox(this, 'partners.' + i + '.amounts.' + subId, {style: 'width: 75px', class: 'amount'}) %>&nbsp;<%= subType %>
                                <% if(subId == "c_othe"){ %>
                                    <%= HTML.TextBox(this, 'partners.' + i + '.amounts.cash_other', {style: 'width: 250px', placeholder: 'Description'}) %>
                                <% } %>
                                <br />
                            <% }.bind(this)); %>
                        </td>
                    </tr>
                    <tr id="inkind">
                        <td class="label" align="right"><b>In-Kind Amounts:</b></td>
                        <td>
                            <% _.each(inkindMap, function(subType, subId){ %>
                                <%= HTML.TextBox(this, 'partners.' + i + '.amounts.' + subId, {style: 'width: 75px', class: 'amount'}) %>&nbsp;<%= subType %>
                                <% if(subId == "othe"){ %>
                                    <%= HTML.TextBox(this, 'partners.' + i + '.amounts.inkind_other', {style: 'width: 250px', placeholder: 'Description'}) %>
                                <% } %>
                                <br />
                            <% }.bind(this)); %>
                        </td>
                    </tr>
                    <tr>
                        <td></td>
                        <td><button class="deletePartner" data-id="<%= i %>">Delete Partner</button></td>
                    </tr>
                </table>
                <hr />
            <% }.bind(this)) %>
            <button id="addPartner">Add Partner</button>
            <div style="background:#EEE;padding:5px;">
                <h3 style="padding-top:0;">Total: $<span id="contributionTotal"><%= number_format(total) %></span></h3>
            </div>
        </td>
        <td valign="top" width="50%">
            <h2>Projects</h2>
            <%= HTML.ProjectSelector(this, 'projects') %>
        </td>
    </tr>
</table>
<div style="display:inline-block;">
    <button id="saveContribution"><% if(this.model.isNew()){ %>Create<% } else { %>Save<% } %> Contribution</button><span class="throbber" style="display:none;"></span>
</div>
<div style="display:inline-block;">
    <button id="cancel">Cancel</button>
</div>
