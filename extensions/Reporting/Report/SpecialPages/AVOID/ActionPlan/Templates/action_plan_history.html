<% if(this.model.length > 0){ %>
    <h3 style="margin-bottom: 0;margin-top:0;">
        <span class='en'>Action Plans Log - Review your accomplishments!</span>
        <span class='fr'>Journal de plans d’action – passez en revue vos réalisations!</span>
    </h3>
    <div class="modules" style="gap:0;">
        <% _.each(new ActionPlans(this.model.where({submitted: true})).getComponents(), function(comp){ %>
            <div style="width: 250px;margin-bottom:0.5em;flex: 1 1 auto;white-space:nowrap;overflow:hidden;text-overflow: ellipsis;">
                <a onClick="$('#actionPlanHistory<%= comp %>').slideToggle();" style="cursor: pointer; display:block;"><span class="AVOID <%= comp %>"><%= comp %></span><span style="vertical-align: text-bottom;"><%= ActionPlan.comp2Text(comp).substring(1) %></span></a>
                <div id="actionPlanHistory<%= comp %>" style="display:none;">
                    <ul>
                        <% this.model.each(function(action){ %>
                            <% if(action.get('submitted') && action.getComponents().indexOf(comp) != -1){ %>
                                <li>
                                    <a class="viewActionPlan" href="#" data-id="<%= action.id %>">
                                        <%= dateTimeHelpers.formatDate(action.get('date'), 'yyyy-MM-dd', 'd MMMM, yyyy') %>
                                    </a>
                                </li>
                            <% } %>
                        <% }) %>
                    </ul>
                </div>
            </div>
        <% }.bind(this)) %>
        <% _.each(new ActionPlans(this.model.where({submitted: true})).getComponents(), function(comp){ %>
            <div style="width: 250px;flex: 1 1 auto;"></div>
        <% }) %>
    </div>
<% } %>
